<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Vision Pro Max</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00d4ff; --bg: #050505; --panel: rgba(255, 255, 255, 0.06); --neon: 0 0 20px rgba(0, 212, 255, 0.4); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Inter', sans-serif; outline: none; -webkit-user-select: none; touch-action: manipulation; }
        
        html, body { height: 100dvh; width: 100vw; margin: 0; padding: 0; overflow: hidden; background: var(--bg); position: fixed; display: flex; }

        #splash { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.5s ease; pointer-events: none; }
        .splash-logo { width: 80px; height: auto; animation: breathe 2s infinite; }
        @keyframes breathe { 0%, 100% { transform: scale(1); opacity: 0.7; } 50% { transform: scale(1.05); opacity: 1; } }

        .sidebar { width: 85px; height: 100vh; background: #000; border-right: 1px solid rgba(255,255,255,0.1); display: none; flex-direction: column; align-items: center; padding-top: 60px; gap: 20px; z-index: 2000; }
        .side-btn { width: 55px; height: 55px; border-radius: 18px; border: 1px solid rgba(255,255,255,0.05); background: var(--panel); color: #444; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 900; cursor: pointer; transition: 0.3s; }
        .side-btn.active { color: var(--accent); border-color: var(--accent); box-shadow: var(--neon); }

        .app-container { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        .header { padding: 55px 20px 10px; background: rgba(0,0,0,0.85); backdrop-filter: blur(25px); z-index: 1000; }
        .nav { background: var(--panel); display: flex; border-radius: 18px; padding: 4px; border: 1px solid rgba(255,255,255,0.08); position: relative; }
        .nav-btn { flex: 1; padding: 12px; border: none; background: none; color: #555; font-weight: 800; font-size: 10px; z-index: 2; cursor: pointer; }
        .nav-btn.active { color: white; }
        .nav-pill { position: absolute; top: 4px; left: 4px; width: calc(33.33% - 8px); height: calc(100% - 8px); background: rgba(255,255,255,0.12); border-radius: 14px; transition: 0.4s cubic-bezier(0.2, 1, 0.2, 1); z-index: 1; }

        .stage { display: flex; width: 300%; height: 100%; transition: 0.5s cubic-bezier(0.2, 1, 0.2, 1); }
        .room { width: 33.3333%; padding: 20px; display: flex; flex-direction: column; height: 100%; max-width: 480px; margin: 0 auto; }
        
        .display { flex: 1; display: flex; flex-direction: column; justify-content: flex-end; text-align: right; padding-bottom: 25px; overflow-x: auto; scrollbar-width: none; }
        .val { font-size: clamp(28px, 7vw, 70px); font-weight: 300; color: #fff; line-height: 1.1; word-wrap: break-word; white-space: normal; }
        .sub { color: var(--accent); font-size: 10px; font-weight: 900; letter-spacing: 3px; margin-bottom: 8px; }

        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 30px; }
        .sci-keys { display: none; } 

        button { height: clamp(55px, 8.5vh, 85px); border-radius: 22px; border: 1px solid rgba(255,255,255,0.05); background: var(--panel); color: white; font-size: 22px; font-weight: 600; cursor: pointer; }
        button:active { background: var(--accent); color: black; transform: scale(0.92); }
        .op { color: var(--accent); font-weight: 800; }
        .action { background: var(--accent); color: black; box-shadow: var(--neon); border: none; }

        @media (min-width: 1024px) { .sidebar { display: flex; } .header { display: none; } }
        @media (orientation: landscape) and (max-height: 500px) {
            .sidebar, .header { display: none !important; }
            .stage { width: 100% !important; transform: none !important; }
            .room:not(:first-child) { display: none !important; }
            .room { width: 100% !important; max-width: 100% !important; padding: 10px 40px; }
            .grid { grid-template-columns: repeat(10, 1fr); gap: 6px; }
            .sci-keys { display: contents; } 
            button { height: 42px; font-size: 13px !important; border-radius: 12px; }
        }

        .mic-active { background: #ff3b30 !important; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(255, 59, 48, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 59, 48, 0); } }
    </style>
</head>
<body>

    <div id="splash"><img src="logo.png" class="splash-logo"></div>

    <div class="sidebar">
        <div class="side-btn active" onclick="move(0)">CALC</div>
        <div class="side-btn" onclick="move(1)">CASH</div>
        <div class="side-btn" onclick="move(2)">CRYP</div>
    </div>

    <div class="app-container">
        <div class="header">
            <div class="nav">
                <div id="pill" class="nav-pill"></div>
                <button class="nav-btn active" onclick="move(0)">CALC</button>
                <button class="nav-btn" onclick="move(1)">CASH</button>
                <button class="nav-btn" onclick="move(2)">CRYPTO</button>
            </div>
        </div>

        <div class="stage" id="stage">
            <div class="room">
                <div class="display"><div class="sub">INFINITY ENGINE</div><div class="val" id="c-main">0</div></div>
                <div class="grid">
                    <div class="sci-keys">
                        <button onclick="cIn('(')">(</button><button onclick="cIn(')')">)</button>
                        <button onclick="memo('mc')">mc</button><button onclick="memo('m+')">m+</button>
                        <button onclick="memo('m-')">m-</button><button onclick="memo('mr')">mr</button>
                        <button onclick="cIn('Math.pow(')">2nd</button><button onclick="cIn('**2')">x¬≤</button>
                        <button onclick="cIn('**3')">x¬≥</button><button onclick="cIn('**')">x ∏</button>
                        <button onclick="cIn('Math.exp(')">eÀ£</button><button onclick="cIn('10**')">10À£</button>
                        <button onclick="cIn('1/')">1/x</button><button onclick="cIn('Math.sqrt(')">¬≤‚àöx</button>
                        <button onclick="cIn('Math.cbrt(')">¬≥‚àöx</button><button onclick="cIn('Math.pow(')"> ∏‚àöx</button>
                        <button onclick="cIn('Math.log(')">ln</button><button onclick="cIn('Math.log10(')">log‚ÇÅ‚ÇÄ</button>
                        <button onclick="factorial()">x!</button><button onclick="cIn('Math.sin(')">sin</button>
                        <button onclick="cIn('Math.cos(')">cos</button><button onclick="cIn('Math.tan(')">tan</button>
                        <button onclick="cIn('Math.E')">e</button><button onclick="cIn('*10**')">EE</button>
                        <button>Rad</button><button onclick="cIn('Math.sinh(')">sinh</button>
                        <button onclick="cIn('Math.cosh(')">cosh</button><button onclick="cIn('Math.tanh(')">tanh</button>
                        <button onclick="cIn('Math.PI')">œÄ</button><button onclick="cIn(Math.random())">Rand</button>
                    </div>
                    <button class="op" onclick="cClr()">AC</button><button class="op" onclick="cDel()">‚å´</button>
                    <button class="op" onclick="cIn('/')">√∑</button><button class="op" onclick="cIn('*')">√ó</button>
                    <button onclick="cIn('7')">7</button><button onclick="cIn('8')">8</button><button onclick="cIn('9')">9</button><button class="op" onclick="cIn('-')">-</button>
                    <button onclick="cIn('4')">4</button><button onclick="cIn('5')">5</button><button onclick="cIn('6')">6</button><button class="op" onclick="cIn('+')">+</button>
                    <button onclick="cIn('1')">1</button><button onclick="cIn('2')">2</button><button onclick="cIn('3')">3</button><button id="mic" onclick="startVoice()">üéôÔ∏è</button>
                    <button onclick="cIn('0')">0</button><button onclick="cIn('.')">.</button><button class="action" onclick="cSolve()" style="grid-column: span 2;">=</button>
                </div>
            </div>
            <div class="room">
                <div class="display"><div class="sub" id="f-sub">USD TO NAIRA</div><div class="val" id="f-val">‚Ç¶0</div></div>
                <div style="display:flex; gap:8px; margin-bottom:15px;"><button id="b-USD" class="action" onclick="setCurr('USD')" style="flex:1; height:45px; font-size:11px;">USD</button><button id="b-GBP" onclick="setCurr('GBP')" style="flex:1; height:45px; font-size:11px;">GBP</button><button id="b-EUR" onclick="setCurr('EUR')" style="flex:1; height:45px; font-size:11px;">EUR</button></div>
                <div class="grid"><button onclick="fIn('7')">7</button><button onclick="fIn('8')">8</button><button onclick="fIn('9')">9</button><button class="op" onclick="fClr()">AC</button><button onclick="fIn('4')">4</button><button onclick="fIn('5')">5</button><button onclick="fIn('6')">6</button><button class="op" onclick="fDel()">‚å´</button><button onclick="fIn('1')">1</button><button onclick="fIn('2')">2</button><button onclick="fIn('3')">3</button><button class="action" onclick="move(0)">DONE</button><button style="grid-column: span 4;" onclick="fIn('0')">0</button></div>
            </div>
            <div class="room">
                <div class="display"><div class="sub">BTC MARKET</div><div class="val" id="crypto-val">‚Ç¶0</div></div>
                <div class="grid"><button style="grid-column: span 4; height:50px; font-size:13px;" id="btc-price" class="action" onclick="fetchAll()">SYNCING...</button><button onclick="cryptoIn('7')">7</button><button onclick="cryptoIn('8')">8</button><button onclick="cryptoIn('9')">9</button><button class="op" onclick="cryptoClr()">AC</button><button onclick="cryptoIn('4')">4</button><button onclick="cryptoIn('5')">5</button><button onclick="cryptoIn('6')">6</button><button class="op" onclick="cryptoDel()">‚å´</button><button onclick="cryptoIn('1')">1</button><button onclick="cryptoIn('2')">2</button><button onclick="cryptoIn('3')">3</button><button class="action" onclick="move(0)">DONE</button><button style="grid-column: span 4;" onclick="cryptoIn('0')">0</button></div>
            </div>
        </div>
    </div>

    <script>
        window.addEventListener('load', () => { setTimeout(() => { document.getElementById('splash').style.opacity = '0'; setTimeout(() => document.getElementById('splash').style.display='none', 500); }, 1000); fetchAll(); });
        let rates = { USD: 1650, GBP: 2100, EUR: 1850, BTC: 0 };
        let active = 'USD', fData = "", cData = "", cryptoData = "", memory = 0;

        function move(idx) {
            document.getElementById('stage').style.transform = `translateX(-${idx * 33.3333}%)`;
            document.getElementById('pill').style.left = `calc(${idx * 33.3333}% + 4px)`;
            document.querySelectorAll('.nav-btn, .side-btn').forEach((b,i) => b.classList.toggle('active', i%3===idx));
        }

        async function startVoice() {
            const Speech = window.webkitSpeechRecognition || window.SpeechRecognition;
            if(!Speech) return;
            const rec = new Speech();
            rec.onstart = () => { document.getElementById('mic').classList.add('mic-active'); };
            rec.onresult = (e) => {
                let t = e.results[0][0].transcript.toLowerCase();
                t = t.replace(/\s*trillions?\s*/g, '*1000000000000').replace(/\s*billions?\s*/g, '*1000000000')
                     .replace(/\s*millions?\s*/g, '*1000000').replace(/\s*thousands?\s*/g, '*1000')
                     .replace(/plus/g,'+').replace(/minus/g,'-').replace(/times|multiplied/g,'*').replace(/divided/g,'/')
                     .replace(/[^0-9+\-*/().*]/g, '');
                cData = t; cUp(); 
                setTimeout(() => { try { cSolve(); } catch(err){} }, 600);
            };
            rec.start();
        }

        function cIn(v) { cData += v; cUp(); }
        function cClr() { cData = ""; cUp(); }
        function cDel() { cData = cData.slice(0,-1); cUp(); }
        function cUp() { 
            document.getElementById('c-main').innerText = cData.replace(/\*\*/g, '^').replace(/\*/g, '√ó').replace(/\//g, '√∑') || "0"; 
            // Auto-scroll to end for lengthy math
            const d = document.querySelector('.display');
            d.scrollLeft = d.scrollWidth;
        }
        
        function cSolve() { 
            if(!cData) return; 
            try { 
                // Advanced Bracket Balancing
                let openB = (cData.match(/\(/g) || []).length;
                let closeB = (cData.match(/\)/g) || []).length;
                let balancedExp = cData + ")".repeat(Math.max(0, openB - closeB));
                
                // Floating point fix logic
                let res = eval(balancedExp); 
                res = parseFloat(res.toPrecision(12)); 
                
                cData = res.toString(); 
                document.getElementById('c-main').innerText = res.toLocaleString(undefined, {maximumFractionDigits: 6}); 
            } catch(e) { document.getElementById('c-main').innerText = "SYNTAX ERR"; } 
        }

        async function fetchAll() {
            try {
                const res = await fetch('https://open.er-api.com/v6/latest/USD');
                const data = await res.json();
                rates.USD = data.rates.NGN;
                rates.GBP = rates.USD / data.rates.GBP;
                rates.EUR = rates.USD / data.rates.EUR;
                const btcRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
                const btcData = await btcRes.json();
                rates.BTC = btcData.bitcoin.usd * rates.USD;
                document.getElementById('btc-price').innerText = "1 BTC = ‚Ç¶" + Math.round(rates.BTC).toLocaleString();
                fUp(); cryptoUp();
            } catch(e) { document.getElementById('btc-price').innerText = "OFFLINE"; }
        }

        function setCurr(c) { active = c; document.getElementById('f-sub').innerText = c + " TO NAIRA"; fUp(); }
        function fIn(v) { fData += v; fUp(); }
        function fClr() { fData = ""; fUp(); }
        function fDel() { fData = fData.slice(0,-1); fUp(); }
        function fUp() { document.getElementById('f-val').innerText = "‚Ç¶" + Math.round(parseFloat(fData||0) * rates[active]).toLocaleString(); }
        function cryptoIn(v) { cryptoData += v; cryptoUp(); }
        function cryptoClr() { cryptoData = ""; cryptoUp(); }
        function cryptoDel() { cryptoData = cryptoData.slice(0,-1); cryptoUp(); }
        function cryptoUp() { document.getElementById('crypto-val').innerText = "‚Ç¶" + Math.round(parseFloat(cryptoData||0) * rates.BTC).toLocaleString(); }
        function factorial() { try { let n = parseInt(eval(cData)), r = 1; if(n > 170) {cData="Infinity"; cUp(); return;} for(let i=1; i<=n; i++) r *= i; cData = r.toString(); cUp(); } catch(e){}}
        function memo(t) { try { let v = parseFloat(eval(cData||"0")); if(t==='mc') memory=0; if(t==='m+') memory+=v; if(t==='m-') memory-=v; if(t==='mr') { cData=memory.toString(); cUp(); }} catch(e){}}
    </script>
</body>
</html>
