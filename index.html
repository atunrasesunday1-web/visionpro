<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Vision Pro Max</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00d4ff; --bg: #0b0b0b; --panel: #1a1a1a; --btn: #262626; --green: #34c759; --btc: #f7931a; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: white; margin: 0; overflow: hidden; height: 100vh; }
        .header { padding: 40px 20px 10px; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); }
        .nav { background: var(--panel); display: flex; border-radius: 15px; padding: 4px; position: relative; }
        .nav-btn { flex: 1; padding: 12px; border: none; background: none; color: #777; font-weight: 800; font-size: 11px; z-index: 2; transition: 0.3s; }
        .nav-btn.active { color: white; }
        .nav-pill { position: absolute; width: 33.33%; height: calc(100% - 8px); background: #333; border-radius: 12px; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 1; }
        .stage { display: flex; width: 300%; height: 80vh; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .room { width: 33.33%; padding: 20px; display: flex; flex-direction: column; }
        .display { flex: 1; display: flex; flex-direction: column; justify-content: flex-end; text-align: right; padding-bottom: 20px; }
        .val { font-size: 55px; font-weight: 300; margin: 0; letter-spacing: -2px; overflow: hidden; }
        .sub { color: var(--accent); font-size: 14px; margin-bottom: 5px; font-weight: 600; }
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        button { height: 65px; border-radius: 15px; border: none; background: var(--btn); color: white; font-size: 22px; font-weight: 600; }
        .op { color: var(--accent); background: #1e2a2d; }
        .action { background: var(--accent); color: black; }
        .mic-active { background: #ff3b30 !important; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body>

    <div class="header">
        <div class="nav">
            <div id="pill" class="nav-pill"></div>
            <button class="nav-btn active" onclick="move(0)">CALC</button>
            <button class="nav-btn" onclick="move(1)">CASH</button>
            <button class="nav-btn" onclick="move(2)">CRYPTO</button>
        </div>
    </div>

    <div class="stage" id="stage">
        <div class="room">
            <div class="display">
                <div class="sub" id="c-sub">READY</div>
                <div class="val" id="c-main">0</div>
            </div>
            <div class="grid">
                <button class="op" onclick="cClr()">AC</button><button class="op" onclick="cIn('/')">√∑</button><button class="op" onclick="cIn('*')">√ó</button><button class="op" onclick="cDel()">‚å´</button>
                <button onclick="cIn('7')">7</button><button onclick="cIn('8')">8</button><button onclick="cIn('9')">9</button><button class="op" onclick="cIn('-')">-</button>
                <button onclick="cIn('4')">4</button><button onclick="cIn('5')">5</button><button onclick="cIn('6')">6</button><button class="op" onclick="cIn('+')">+</button>
                <button onclick="cIn('1')">1</button><button onclick="cIn('2')">2</button><button onclick="cIn('3')">3</button><button class="action" onclick="cSolve()">=</button>
                <button id="mic" onclick="startVoice()">üéôÔ∏è</button>
                <button onclick="cIn('0')">0</button><button onclick="cIn('.')">.</button>
                <button class="op" onclick="move(1)">‚Ç¶</button>
            </div>
        </div>

        <div class="room">
            <div class="display">
                <div class="sub">LIVE MARKET</div>
                <div class="val" id="f-val">‚Ç¶0</div>
            </div>
            <div style="display:flex; gap:10px; margin-bottom:10px;">
                <button style="flex:1; font-size:12px;" id="b-USD" class="action" onclick="setCurr('USD')">USD</button>
                <button style="flex:1; font-size:12px;" id="b-GBP" onclick="setCurr('GBP')">GBP</button>
                <button style="flex:1; font-size:12px;" id="b-EUR" onclick="setCurr('EUR')">EUR</button>
            </div>
            <div class="grid">
                <button onclick="fIn('7')">7</button><button onclick="fIn('8')">8</button><button onclick="fIn('9')">9</button><button class="op" onclick="fClr()">AC</button>
                <button onclick="fIn('4')">4</button><button onclick="fIn('5')">5</button><button onclick="fIn('6')">6</button><button class="op" onclick="fDel()">‚å´</button>
                <button onclick="fIn('1')">1</button><button onclick="fIn('2')">2</button><button onclick="fIn('3')">3</button><button class="action" onclick="move(0)">DONE</button>
                <button style="grid-column: span 4;" onclick="fIn('0')">0</button>
            </div>
        </div>

        <div class="room">
            <div class="display">
                <div class="sub" style="color:var(--btc)">BITCOIN LIVE</div>
                <div class="val" id="crypto-val">‚Ç¶0</div>
            </div>
            <div class="grid">
                <button style="grid-column: span 4; background:var(--btc); color:black; font-size:14px;" id="btc-price">FETCHING BTC...</button>
                <button onclick="cryptoIn('7')">7</button><button onclick="cryptoIn('8')">8</button><button onclick="cryptoIn('9')">9</button><button class="op" onclick="cryptoClr()">AC</button>
                <button onclick="cryptoIn('4')">4</button><button onclick="cryptoIn('5')">5</button><button onclick="cryptoIn('6')">6</button><button class="op" onclick="cryptoDel()">‚å´</button>
                <button onclick="cryptoIn('1')">1</button><button onclick="cryptoIn('2')">2</button><button onclick="cryptoIn('3')">3</button><button class="action" onclick="move(0)">BACK</button>
                <button style="grid-column: span 4;" onclick="cryptoIn('0')">0</button>
            </div>
        </div>
    </div>

    <script>
        let rates = { USD: 1650, GBP: 2100, EUR: 1800, BTC: 0 };
        let active = 'USD';
        let fData = ""; let cData = ""; let cryptoData = "";

        async function fetchAll() {
            try {
                const res = await fetch('https://open.er-api.com/v6/latest/USD');
                const data = await res.json();
                rates.USD = data.rates.NGN;
                rates.GBP = rates.USD / data.rates.GBP;
                rates.EUR = rates.USD / data.rates.EUR;
                const btcRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
                const btcData = await btcRes.json();
                rates.BTC = btcData.bitcoin.usd * rates.USD;
                document.getElementById('btc-price').innerText = "1 BTC = ‚Ç¶" + Math.round(rates.BTC).toLocaleString();
            } catch(e) { document.getElementById('btc-price').innerText = "OFFLINE RATES"; }
        }
        window.onload = fetchAll;

        function move(idx) {
            document.getElementById('stage').style.transform = `translateX(-${idx * 33.33}%)`;
            document.getElementById('pill').style.transform = `translateX(${idx * 100}%)`;
            document.querySelectorAll('.nav-btn').forEach((b,i) => b.classList.toggle('active', i===idx));
        }

        function cIn(v) { cData += v; cUp(); }
        function cClr() { cData = ""; cUp(); }
        function cDel() { cData = cData.slice(0,-1); cUp(); }
        function cUp() { document.getElementById('c-main').innerText = cData || "0"; }
        function cSolve() { try { cData = eval(cData.replace('√ó','*').replace('√∑','/')).toString(); cUp(); } catch(e) { cData = "Error"; cUp(); } }

        function setCurr(c) { active = c; document.querySelectorAll('[id^="b-"]').forEach(b => b.classList.remove('action')); document.getElementById('b-'+c).classList.add('action'); fUp(); }
        function fIn(v) { fData += v; fUp(); }
        function fClr() { fData = ""; fUp(); }
        function fDel() { fData =
