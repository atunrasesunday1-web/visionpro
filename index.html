<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Vision Elite | Scientific Master</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg: #000; --text: #fff; --surface: #1c1c1e;
            --orange: #ff9f0a; --gray: #505050; --light-gray: #a5a5a5;
            --dark-gray: #333333; --border: #2c2c2e;
        }
        [data-theme="light"] {
            --bg: #f2f2f7; --text: #000; --surface: #fff;
            --orange: #ff9500; --gray: #d1d1d6; --light-gray: #8e8e93;
            --dark-gray: #e5e5ea; --border: #c6c6c8;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { 
            background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; 
            height: 100svh; display: flex; flex-direction: column; overflow: hidden;
            transition: background 0.3s ease;
        }

        /* --- DISPLAY AREA --- */
        .display {
            flex: 1; display: flex; flex-direction: column; justify-content: flex-end;
            align-items: flex-end; padding: 20px 30px; overflow: hidden;
        }
        .equation { font-size: 18px; color: var(--light-gray); min-height: 24px; margin-bottom: 5px; font-weight: 400; }
        .current-val { font-size: 80px; font-weight: 300; letter-spacing: -2px; line-height: 1; word-break: break-all; text-align: right; }

        /* --- GRID SYSTEM --- */
        .grid-container { padding: 10px; padding-bottom: 40px; display: grid; gap: 12px; }

        /* PORTRAIT (Standard) */
        @media screen and (orientation: portrait) {
            .grid-container { grid-template-columns: repeat(4, 1fr); }
            .sci-only { display: none; }
            .current-val { font-size: 70px; }
            .double { grid-column: span 2; border-radius: 50px !important; padding-left: 35px !important; justify-content: flex-start !important; }
        }

        /* LANDSCAPE / DESKTOP (Scientific) */
        @media screen and (min-width: 768px), screen and (orientation: landscape) {
            .grid-container { 
                grid-template-columns: repeat(10, 1fr); 
                gap: 10px; 
                max-width: 1000px; 
                margin: 0 auto; 
                width: 95%;
            }
            .sci-only { display: flex; }
            .current-val { font-size: 55px; }
            .double { grid-column: span 1; }
            .btn { border-radius: 40px !important; aspect-ratio: auto !important; height: 48px !important; font-size: 15px !important; }
        }

        /* --- BUTTONS --- */
        .btn {
            aspect-ratio: 1; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 24px; font-weight: 400; cursor: pointer; border: none; transition: background 0.2s, transform 0.1s;
            background: var(--dark-gray); color: var(--text);
        }
        .btn:active { transform: scale(0.95); opacity: 0.7; }
        .btn.op { background: var(--orange); color: white; font-size: 30px; }
        .btn.sys { background: var(--light-gray); color: black; font-size: 20px; font-weight: 500; }
        .btn.sci { background: var(--surface); font-size: 14px; font-weight: 500; }

        header { padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; }
        .header-icon { color: var(--orange); cursor: pointer; opacity: 0.8; }
    </style>
</head>
<body>

    <header>
        <div class="header-icon" onclick="toggleTheme()"><i data-lucide="sun"></i></div>
        <div style="font-size: 11px; font-weight: 800; letter-spacing: 2px; opacity: 0.4;">SCIENTIFIC ELITE</div>
        <div class="header-icon" onclick="alert('History Portal Ready')"><i data-lucide="history"></i></div>
    </header>

    <div class="display">
        <div class="equation" id="eq-display"></div>
        <div class="current-val" id="main-display">0</div>
    </div>

    <div class="grid-container">
        <button class="btn sci sci-only" onclick="sciAction('(')">(</button>
        <button class="btn sci sci-only" onclick="sciAction(')')">)</button>
        <button class="btn sci sci-only" onclick="memAction('mc')">mc</button>
        <button class="btn sci sci-only" onclick="memAction('m+')">m+</button>
        <button class="btn sci sci-only" onclick="memAction('m-')">m-</button>
        <button class="btn sci sci-only" onclick="memAction('mr')">mr</button>
        <button class="btn sys" id="ac-btn" onclick="clearAll()">AC</button>
        <button class="btn sys" onclick="negate()">+/-</button>
        <button class="btn sys" onclick="percent()">%</button>
        <button class="btn op" onclick="setOp('/')">÷</button>

        <button class="btn sci sci-only" onclick="sciAction('2nd')">2nd</button>
        <button class="btn sci sci-only" onclick="sciAction('pow2')">x²</button>
        <button class="btn sci sci-only" onclick="sciAction('pow3')">x³</button>
        <button class="btn sci sci-only" onclick="setOp('**')">xʸ</button>
        <button class="btn sci sci-only" onclick="sciAction('ex')">eˣ</button>
        <button class="btn sci sci-only" onclick="sciAction('10x')">10ˣ</button>
        <button class="btn" onclick="appendNum('7')">7</button>
        <button class="btn" onclick="appendNum('8')">8</button>
        <button class="btn" onclick="appendNum('9')">9</button>
        <button class="btn op" onclick="setOp('*')">×</button>

        <button class="btn sci sci-only" onclick="sciAction('1x')">1/x</button>
        <button class="btn sci sci-only" onclick="sciAction('sqrt')">²√x</button>
        <button class="btn sci sci-only" onclick="sciAction('cbrt')">³√x</button>
        <button class="btn sci sci-only" onclick="setOp('yroot')">ʸ√x</button>
        <button class="btn sci sci-only" onclick="sciAction('ln')">ln</button>
        <button class="btn sci sci-only" onclick="sciAction('log10')">log₁₀</button>
        <button class="btn" onclick="appendNum('4')">4</button>
        <button class="btn" onclick="appendNum('5')">5</button>
        <button class="btn" onclick="appendNum('6')">6</button>
        <button class="btn op" onclick="setOp('-')">−</button>

        <button class="btn sci sci-only" onclick="sciAction('sin')">sin</button>
        <button class="btn sci sci-only" onclick="sciAction('cos')">cos</button>
        <button class="btn sci sci-only" onclick="sciAction('tan')">tan</button>
        <button class="btn sci sci-only" onclick="appendNum('Math.E')">e</button>
        <button class="btn sci sci-only" onclick="sciAction('EE')">EE</button>
        <button class="btn sci sci-only" onclick="sciAction('rad')">Rad</button>
        <button class="btn" onclick="appendNum('1')">1</button>
        <button class="btn" onclick="appendNum('2')">2</button>
        <button class="btn" onclick="appendNum('3')">3</button>
        <button class="btn op" onclick="setOp('+')">+</button>

        <button class="btn sci sci-only" onclick="sciAction('sinh')">sinh</button>
        <button class="btn sci sci-only" onclick="sciAction('cosh')">cosh</button>
        <button class="btn sci sci-only" onclick="sciAction('tanh')">tanh</button>
        <button class="btn sci sci-only" onclick="appendNum('Math.PI')">π</button>
        <button class="btn sci sci-only" onclick="sciAction('rand')">Rand</button>
        <button class="btn sci sci-only" onclick="sciAction('fact')">x!</button>
        <button class="btn double" onclick="appendNum('0')">0</button>
        <button class="btn" onclick="appendNum('.')">.</button>
        <button class="btn op" onclick="solve()">=</button>
    </div>

    <script>
        lucide.createIcons();
        let currentInput = '0';
        let operator = null;
        let previousVal = '';
        let waitingForNext = false;

        const mainDisp = document.getElementById('main-display');

        function appendNum(n) {
            if (waitingForNext) {
                currentInput = n;
                waitingForNext = false;
            } else {
                currentInput = currentInput === '0' ? n : currentInput + n;
            }
            updateUI();
        }

        function setOp(op) {
            if (operator && !waitingForNext) solve();
            previousVal = currentInput;
            operator = op;
            waitingForNext = true;
        }

        function solve() {
            if (!operator || waitingForNext) return;
            let res = eval(`${previousVal}${operator}${currentInput}`);
            currentInput = String(res);
            operator = null;
            updateUI();
        }

        function sciAction(type) {
            let v = parseFloat(currentInput);
            switch(type) {
                case 'pow2': currentInput = String(Math.pow(v, 2)); break;
                case 'sqrt': currentInput = String(Math.sqrt(v)); break;
                case 'sin': currentInput = String(Math.sin(v)); break;
                case 'cos': currentInput = String(Math.cos(v)); break;
                case 'tan': currentInput = String(Math.tan(v)); break;
                case 'log10': currentInput = String(Math.log10(v)); break;
                case 'fact': currentInput = String(factorial(v)); break;
            }
            updateUI();
        }

        function factorial(n) { return n <= 1 ? 1 : n * factorial(n - 1); }
        function clearAll() { currentInput = '0'; operator = null; updateUI(); }
        function negate() { currentInput = String(parseFloat(currentInput) * -1); updateUI(); }
        function percent() { currentInput = String(parseFloat(currentInput) / 100); updateUI(); }

        function updateUI() {
            mainDisp.innerText = currentInput.length > 9 ? parseFloat(currentInput).toPrecision(7) : currentInput;
            document.getElementById('ac-btn').innerText = currentInput === '0' ? 'AC' : 'C';
        }

        function toggleTheme() {
            const t = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', t);
        }
    </script>
</body>
</html>
